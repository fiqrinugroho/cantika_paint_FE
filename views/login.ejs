<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Cantika Paint | Login</title>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css">
    <link href="/css/login.css" rel="stylesheet" />
    <link rel="icon" href="/img/favicon.jpeg">
  </head>
<body >
    <div class="container">
        <div class="row justify-content-center mt-5">
            <div class="col-md-6">
                <div class="card" >
                    <div class="card-header">
                        <h3 class="text-center">Cantika Paint</h3>
                    </div>
                    <div class="card-body">
                        <form action="/login" method="POST">
                            <div class="mb-3">
                                <% if (error) { %>
                                    <div class="alert alert-sm alert-danger alert-dismissible fade show" role="alert" style="height: 40px; ">
                                        <div style="margin-top: -10px; font-size: large;" class="text-center"> <%= error %></div>
                                        <button style="margin-top: -10px;" type="button" class="btn-close btn btn-md" data-bs-dismiss="alert" aria-label="Close"></button>
                                    </div>
                                <% } %>
                            </div>
                            <div class="mb-3">
                                <input type="text" class="form-control" id="username" name="username" placeholder="username" required>
                            </div>
                            <div class="mb-3">
                                <input type="password" class="form-control" id="password" name="password" placeholder="password" required>
                            </div>
                            <div class="text-center mt-4">
                                <button disabled ="submit" id="loginButton" name="loginButton" class="btn btn-lg btn-primary"> 
                                    <div class="spinner-border spinner-border-sm text-white d-none" role="status" id="loading">
                                     <span class="visually-hidden">Loading...</span>
                                    </div>
                                    Login
                                 </button>
                            </div>
                        </form>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <script>
        const usernameInput = document.getElementById('username');
        const passwordInput = document.getElementById('password');
        const loginButton = document.getElementById('loginButton');
        const loadingDiv = document.getElementById('loading');
        // Cek apakah form telah diisi untuk mengaktifkan tombol login
        function checkFormValidity() {
            if (usernameInput.value.trim() !== '' && passwordInput.value.trim() !== '') {
            // Tampilkan animasi loading
                loadingDiv.classList.remove('d-none');
                setTimeout(() => {
                    loadingDiv.classList.add('d-none');
                }, 200);
                loginButton.disabled = false;
            } else {
                loginButton.disabled = true;
            }
        }

        // Tambahkan event listener untuk memeriksa form ketika input berubah
        usernameInput.addEventListener('input', checkFormValidity);
        passwordInput.addEventListener('input', checkFormValidity);
    </script>
  <%- include('partials/footer') %>

</body>
</html>